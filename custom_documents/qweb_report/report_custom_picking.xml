<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <template id="report_custom_picking">
          <style type="text/css">
           .top-border {
               border-top: solid 2px #000000;
           }
           p {
             line-height: 9px;
             font-size: 11px;
          }
          strong {
            font-size: 12px;
          }
          th{
            font-size: 7px;
          }
          .no-padd-left {
              padding-left: 0px !important;
          }
         .table1{
             width: 100%;
             font-size: 10px;
          }
         .table2{
            width: 100%;
            font-size: 10px;
          }
         .table2 thead{
              border-top: solid 2px #000000;
              border-bottom: solid 2px #000000;
          }
        .table2 tfoot{
              border-top: solid 2px #000000;
          }
        .top_part{
          min-height:30mm;
        }
        .middle_part{
          min-height:162mm;
        }
        .my_footer{
          border-top: solid 2px #000000;
          border-bottom: solid 2px #000000;
          min-height:10mm;
        }

         </style>
            <t t-call="report.html_container">
                <t t-foreach="docs" t-as="o">
                      <!-- CUSTOM VALUED REPORT -->
                      <div class="page" t-if="o.partner_id.pick_print_op == 'valued' and o.picking_type_id.code == 'outgoing'">
                            <div class="row top_part">
                              <div class="col-xs-7 top-border">
                                  <div class="col-xs-3 no-padd-left">
                                      <strong>PICKING:</strong>
                                  </div>
                                  <div class="col-xs-4">
                                      <strong><span t-field="o.name"/></strong>
                                  </div>
                                  <div class="col-xs-5">
                                    <strong>DATE: <span t-esc="o.min_date.split(' ')[0].replace('-', '/')"/></strong>
                                  </div>

                                  <div t-if="o.partner_id">
                                      <br/>
                                      <p><strong>SOLICITANT</strong></p>
                                      <p><span t-field="o.partner_id.ref"/> <span t-field="o.partner_id.name"/></p>
                                      <p><span t-field="o.partner_id.street"/></p>
                                      <p><span t-field="o.partner_id.zip"/> - <span t-field="o.partner_id.city"/></p>
                                      <p>Tlfo. <span t-field="o.partner_id.phone"/></p>
                                  </div>
                                  <div>
                                    <table class="table1">
                                    <thead>
                                        <tr>
                                            <th><strong>Agent</strong></th>
                                            <th><strong>Delivery Man</strong></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>
                                                <span t-field="o.user_id.name"/>
                                            </td>
                                            <td>
                                              <div t-if="o.route_detail_id">
                                                <span t-field="o.route_detail_id.comercial_id.name"/>
                                              </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                    </table>
                                  </div>
                              </div>
                              <div class="col-xs-1">
                              </div>
                              <div class="col-xs-4">
                                  <div t-if="o.partner_id.commercial_partner_id">
                                      <br/>
                                      <br/>
                                      <p><strong>INVOICE TO</strong></p>
                                      <p><span t-field="o.partner_id.commercial_partner_id.ref"/> <span t-field="o.partner_id.commercial_partner_id.name"/></p>
                                      <p><span t-field="o.partner_id.commercial_partner_id.street"/></p>
                                      <p><span t-field="o.partner_id.commercial_partner_id.zip"/> - <span t-field="o.partner_id.commercial_partner_id.city"/></p>
                                      <br/>
                                      <p><strong>NIF: </strong><span t-field="o.partner_id.commercial_partner_id.vat"/> </p>
                                  </div>
                              </div>
                          </div>
                          <div class="middle_part">
                          <table class="table2">
                            <thead>
                              <tr>
                                  <th><strong>Ref.</strong></th>
                                  <th><strong>Description</strong></th>
                                  <th class="text-right"><strong>% IVA</strong></th>
                                  <th class="text-right"><strong>Qty.</strong></th>
                                  <th><strong>Unit</strong></th>
                                  <th class="text-right"><strong>Pricelist Price</strong></th>
                                  <th class="text-right"><strong>Applied Price</strong></th>
                                  <th class="text-right"><strong>Net import</strong></th>
                              </tr>

                            </thead>
                            <tbody>
                              <tr t-foreach="lines" t-as="l">
                                  <td>
                                      <span t-esc="l['ref']"/>
                                  </td>
                                  <td>
                                      <span t-esc="l['des']"/>
                                  </td>
                                  <td class="text-right">
                                      <span t-esc="l['iva']"/>
                                  </td>
                                  <td class="text-right">
                                      <span t-esc="l['qty']"/>
                                  </td>
                                  <td>
                                      <span t-esc="l['unit']"/>
                                  </td>
                                  <td class="text-right">
                                      <span t-esc="l['pric_price']"/>
                                  </td>
                                  <td class="text-right">
                                      <span t-esc="l['app_price']"/>
                                  </td>
                                  <td class="text-right">
                                      <span t-esc="l['net']"/>
                                  </td>
                              </tr>
                            </tbody>
                            <tfoot>
                              <td>
                              </td>
                              <td>
                              </td>
                              <td class="text-right">
                                TOTALS:
                              </td>
                              <td class="text-right">
                                <span t-esc="tfoot['sum_qty']"/>
                              </td>
                              <td>

                              </td>
                              <td class="text-right">

                              </td>
                              <td class="text-right">

                              </td>
                              <td class="text-right">
                                <span t-esc="tfoot['sum_net']"/>
                              </td>
                            </tfoot>
                          </table>
                          </div>
                          <div class="my_footer">
                            <table class="table1">
                            <thead>
                                <tr>
                                    <th><strong>IMPONIBLE BASE</strong></th>
                                    <th><strong>IVA</strong></th>
                                    <th><strong>IMPORT IVA</strong></th>
                                    <th><strong>% REQ</strong></th>
                                    <th><strong>IMPORT REQ</strong></th>
                                    <th><strong>TOTAL DOCUMENT</strong></th>
                                    <th><strong>ACCOUNT PAID</strong></th>
                                    <th><strong>TOTAL TO PAY</strong></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                  <td>
                                      <span t-esc="totals['base']"/>
                                  </td>
                                  <td>
                                      <span t-esc="totals['iva']"/>
                                  </td>
                                  <td>
                                      <span t-esc="totals['iva_import']"/>
                                  </td>
                                  <td>
                                      <span t-esc="totals['rec']"/>
                                  </td>
                                  <td>
                                      <span t-esc="totals['imp_rec']"/>
                                  </td>
                                  <td>
                                      <span t-esc="totals['total_doc']"/>
                                  </td>
                                  <td>
                                      <span t-esc="totals['acc_paid']"/>
                                  </td>
                                  <td>
                                      <span t-esc="totals['total_paid']"/>
                                  </td>
                                </tr>
                            </tbody>
                            </table>
                          </div>
                      </div>
























                      <div class="page" t-if="o.partner_id.pick_print_op == 'not_valued' or o.picking_type_id.code != 'outgoing'">  <!-- ORIGINAL REPORT -->
                          <div class="row"><div class="col-xs-4 pull-right">
                          <!-- <img t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s' % ('Code128', o.name, 600, 100)" style="width:300px;height:50px;"/> -->
                          </div></div>
                          <div class="row">
                              <div class="col-xs-6">
                                  <div t-if="o.picking_type_id.code=='incoming' and o.partner_id">
                                      <span><strong>Supplier Address:</strong></span>
                                  </div>
                                  <div t-if="o.picking_type_id.code=='internal' and o.partner_id">
                                      <span><strong>Warehouse Address:</strong></span>
                                  </div>
                                  <div t-if="o.picking_type_id.code=='outgoing' and o.partner_id">
                                      <span><strong>Customer Address:</strong></span>
                                  </div>
                                  <div t-if="o.partner_id" name="partner_header">
                                      <div t-field="o.partner_id"
                                         t-field-options='{"widget": "contact", "fields": ["address", "name", "phone", "fax"], "no_marker": true}'/>
                                      <p t-if="o.partner_id.vat">VAT: <span t-field="o.partner_id.vat"/></p>
                                  </div>
                              </div>
                              <div class="col-xs-5 col-xs-offset-1">
                                  <div t-if="o.move_lines and o.move_lines[0].partner_id and o.move_lines[0].partner_id.id != o.partner_id.id">
                                      <span><strong>Delivery Address:</strong></span>
                                      <div t-field="o.move_lines[0].partner_id"
                                          t-field-options='{"widget": "contact", "fields": ["address", "name", "phone", "fax"], "no_marker": true}'/>
                                  </div>
                                  <div t-if="o.picking_type_id.code != 'internal' and (not o.move_lines or not o.move_lines[0].partner_id) and o.picking_type_id.warehouse_id.partner_id">
                                      <span><strong>Warehouse Address:</strong></span>
                                      <div t-field="o.picking_type_id.warehouse_id.partner_id"
                                          t-field-options='{"widget": "contact", "fields": ["address", "name", "phone", "fax"], "no_marker": true}'/>
                                  </div>
                              </div>
                          </div>
                          <h2>
                          <span t-field="o.picking_type_id"/>:
                          <span t-field="o.name"/>
                          </h2>
                          <table class="table table-condensed">
                          <thead>
                              <tr>
                                  <th><strong>Order (Origin)</strong></th>
                                  <th><strong>State</strong></th>
                                  <th><strong>Commitment Date</strong></th>
                                  <th name="td_sched_date_h"><strong>Scheduled Date</strong></th>
                              </tr>
                          </thead>
                          <tbody>
                              <tr>
                                  <td>
                                      <span t-field="o.origin"/>
                                  </td>
                                  <td>
                                      <span t-field="o.state"/>
                                  </td>
                                  <td>
                                      <span t-field="o.date"/>
                                  </td>
                                  <td name="td_sched_date">
                                      <span t-field="o.min_date"/>
                                  </td>
                              </tr>
                          </tbody>
                          </table>
                          <br/>
                          <br/>
                          <table class="table table-condensed">
                            <thead>
                              <tr>
                                  <th><strong>Product</strong></th>
                                  <th class="text-right"><strong>Quantity</strong></th>

                              </tr>
                            </thead>
                            <tbody>
                              <tr t-foreach="o.move_lines" t-as="move">
                                  <td><span t-field="move.product_id"/></td>
                                  <td class="text-right"><span t-field="move.product_uom_qty"/> <span t-field="move.product_uom" groups="product.group_uom"/></td>

                              </tr>
                            </tbody>
                          </table>

                      </div>
                 </t>
             </t>
        </template>
    </data>
</openerp>
