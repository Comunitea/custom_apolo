<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <template id="report_custom_picking">
        <style type="text/css">
        .top-border {
            border-top: solid 2px #000000;
        }
        p {
          line-height: 9px;
          font-size: 11px;
        }
        strong {
         font-size: 12px;
        }
        th{
         font-size: 7px;
        }
        .no-padd-left {
           padding-left: 0px !important;
        }
        .table1{
          width: 100%;
          font-size: 10px;
        }
        .table2{
         width: 100%;
        }
        .table2 td{
         font-size: 12px;
        }
        .table2 .col-ref{
          width: 10%;
        }
        .table2 .col-des{
          width: 20%;
        }
        .table2 .col-iva{
          width: 10%;
        }
        .table2 .col-qty{
          width: 10%;
        }
        .table2 .col-unit{
          width: 20%;
        }
        .table2 .col-pp{
          width: 10%;
        }
        .table2 .col-ap{
          width: 10%;
        }
        .table2 .col-net{
          width: 10%;
        }
        .table2 td{
          padding-right:4px;
        }
        .table2 th{
          padding-right:4px;
         }
        .table2 thead{
          border-top: solid 2px #000000;
          border-bottom: solid 2px #000000;
        }
        .table2 tfoot{
          border-top: solid 2px #000000;
        }
        .top_part{
          min-height:30mm;
        }
        .middle_part{
          min-height:162mm;
        }
        .my_footer_direct{
          border-top: solid 2px #000000;
          border-bottom: solid 2px #000000;
          min-height:18mm;
        }
        .my_footer_indirect{
          border-top: solid 2px #000000;
          min-height:18mm;
          font-size: 10px;
          font-weight: bold;
        }
        .my_footer_indirect .right{
          text-align: right;
        }
        .table3{
          width: 100%;
        }
        .table3 th strong{
          font-size: 10px;
        }
        .table3 .col-fbase{
          width:20%;
        }
        .table3 .col-fiva{
          width:6%;
        }
        .table3 .col-fivaimp{
          width:20%;
        }
        .table3 .col-freq{
          width:6%;
        }
        .table3 .col-freqimp{
          width:15%;
        }
        .table3 .col-ftd{
          width:20%;
        }
        .table3 .col-fap"{
          width:20%;
        }
        .table3 .col-ftotal{
          width:20%;
        }
        .table3 td{
          font-size: 11px;
        }
        .track_info{
          background-color:#C0C0C0;
          font-size:9px;
        }
        .full-border{
          border-top: solid 1px #000000;
          border-left: solid 1px #000000;
          border-bottom: solid 1px #000000;
          border-right: solid 1px #000000;
          margin-left: 6px;
          margin-right: 6px;
        }
        .full-border2{
          border-top: solid 1px #000000;
          border-left: solid 1px #000000;
          border-bottom: solid 1px #000000;
          border-right: solid 1px #000000;
        }
        .header_part{
          min-height: 45mm;
        }
        .full-height{
          height: 45mm;
        }
        .header-font{
          font-weight: bold;
          font-size: 14px;
        }
        .reference-font{
          font-weight: bold;
          font-size: 20px;
          font-family: monospace;
        }
        .tr-separated{
          line-height: 170%;
        }
        .foot-text .Text1{
          font-size: 10px;
          text-align: center;
        }
        </style>
          <t t-call="report.html_container">
                <t t-foreach="docs" t-as="o">
                    <!-- CUSTOM VALUED REPORT -->
                    <div class="page">
                      <t t-call="custom_documents.picking_header_part"/>
                        <t t-call="custom_documents.picking_top_part"/>
                         <div class="row middle_part">
                           <div t-if="o.indirect">
                             <t t-call="custom_documents.picking_indirect_table"/>
                           </div>
                           <div t-if="not o.indirect">
                             <t t-call="custom_documents.picking_direct_table"/>
                           </div>

                          </div>
                          <t t-call="custom_documents.picking_bottom_part"/>
                    </div>
                </t>
            </t>
        </template>

        <template id="picking_direct_table">
          <table class="table2 no-padd-left">
            <thead>
              <tr>
                  <th class="col-ref"><strong>Ref.</strong></th>
                  <th class="col-des"><strong>Description</strong></th>
                  <th class="col-iva text-right"><strong>% IVA</strong></th>
                  <th class="col-qty text-right"><strong>Qty.</strong></th>
                  <th class="col-unit"><strong>Unit</strong></th>
                  <th class="col-pp text-right"><strong t-if="o.partner_id.pick_print_op != 'not_valued' and o.picking_type_id.code == 'outgoing' and o.partner_id.pick_print_op">Pricelist Price</strong></th>
                  <th class="col-ap text-right"><strong t-if="o.partner_id.pick_print_op != 'not_valued' and o.picking_type_id.code == 'outgoing' and o.partner_id.pick_print_op">Applied Price</strong></th>
                  <th class="col-net text-right"><strong t-if="o.partner_id.pick_print_op != 'not_valued' and o.picking_type_id.code == 'outgoing' and o.partner_id.pick_print_op">Net import</strong></th>
              </tr>

            </thead>
            <tbody>
              <t t-foreach="lines[o.id]" t-as="l">
                <tr>
                  <td>
                      <span t-esc="l['ref']"/>
                  </td>
                  <td>
                      <span t-esc="l['des']"/>
                  </td>
                  <td class="text-right">
                      <span t-esc="l['iva']"/>
                  </td>
                  <td class="text-right">
                      <span t-esc="l['qty']"/>
                  </td>
                  <td>
                      <span t-esc="l['unit']"/>
                  </td>
                  <td class="text-right">
                    <div  t-if="o.partner_id.pick_print_op != 'not_valued' and o.picking_type_id.code == 'outgoing' and o.partner_id.pick_print_op">
                      <span t-esc="l['pric_price']"/>
                    </div>
                  </td>
                  <td class="text-right">
                    <div  t-if="o.partner_id.pick_print_op != 'not_valued' and o.picking_type_id.code == 'outgoing' and o.partner_id.pick_print_op">
                      <span t-esc="l['app_price']"/>
                    </div>
                  </td>
                  <td class="text-right">
                    <div  t-if="o.partner_id.pick_print_op != 'not_valued' and o.picking_type_id.code == 'outgoing' and o.partner_id.pick_print_op">
                      <span t-esc="l['net']"/>
                    </div>
                  </td>
              </tr>
              <tr class="track_info" t-if="o.partner_id.pick_print_op == 'tracked'">
                 <t t-foreach="l['lots']" t-as="op_info">
                   <td></td>
                   <td style="font-size: 9px" colspan="1">
                     Lot: <span t-esc="op_info['lot_name']"/>
                   </td>
                   <td style="font-size: 9px" colspan="2">
                     Life Date: <span t-esc="op_info['lot_date']"/>
                   </td>
                   <td style="font-size: 9px" colspan="1">
                     Sale units: <span t-esc="op_info['uos_qty']"/> <span t-esc="op_info['uos_name']"/>
                   </td>
                   <td style="font-size: 9px" colspan="2">
                     Stock units: <span t-esc="op_info['uom_qty']"/> <span t-esc="op_info['uom_name']"/>
                   </td>
                   <td></td>
                 </t>
              </tr>
              </t>
            </tbody>
            <tfoot>
              <td>
              </td>
              <td>
              </td>
              <td class="text-right">
                TOTALS:
              </td>
              <td class="text-right">
                <span t-esc="tfoot[o.id]['sum_qty']"/>
              </td>
              <td>

              </td>
              <td class="text-right">

              </td>
              <td class="text-right">

              </td>
              <td class="text-right">
                <div  t-if="o.partner_id.pick_print_op != 'not_valued' and o.picking_type_id.code == 'outgoing' and o.partner_id.pick_print_op">
                  <span t-esc="tfoot[o.id]['sum_net']"/>
                </div>
              </td>
            </tfoot>
          </table>
        </template>

        <template id="picking_indirect_table">
          <style type="text/css">
            .table4{
              width: 100%;
            }
            .table4 .col-ref{
              width:9%;
            }
            .table4 .col-prod{
              width:31%;
            }
            .table4 .col-sc{
              width:6%;
            }
            .table4 .col-sc-right{
              width:6%;
              text-align: right;
              padding-right: 4px;
            }
            .table4 .col-ean{
              width:14%;
            }
            .table4 .col-total{
              width:8%;
            }
            .table4 thead{
              border-bottom: solid 2px #000000;
            }
            .table4 tfoot{
              border-top: solid 2px #000000;
            }
            .table4 .col-ref-td{
              text-align: right;
              padding-right: 3px;
            }
            .table4 td{
              font-size: 12px;
            }
            .table5{
              width: 100%;
            }
            .table5 td .totaluds{
              text-aligh: right;
            }
            .table5 td{
              padding-top: 5px;
            }
          </style>
          <table class="table4 no-padd-left">
            <thead>
              <th class="col-ref text-center"><strong>Ref.</strong></th>
              <th class="col-prod"><strong>Product</strong></th>
              <th class="col-sc text-center"><strong>U / C</strong></th>
              <th class="col-ean text-center"><strong>EAN BOX</strong></th>
              <th class="col-ean text-center"><strong>EAN CONSUM</strong></th>
              <th class="col-sc text-center"><strong>Qty.</strong></th>
              <th class="col-sc text-center"><strong>Units</strong></th>
              <th class="col-sc text-center"><strong>Qty. S/C</strong></th>
              <!-- <th class="col-sc text-center"><strong>Units S/C</strong></th> -->
              <th class="col-total text-center"><strong>Total Qty</strong></th>
            </thead>
            <tbody>
              <tr t-foreach="ind_lines[o.id]" t-as="lin">
                <td class="col-ref-td"><strong><span t-esc="lin['ref']"/></strong></td>
                <td class="col-prod"><span t-esc="lin['prod']"/></td>
                <td class="col-sc-right"><span t-esc="lin['uc']"/></td>
                <td class="col-ean"><span t-esc="lin['ean_box']"/></td>
                <td class="col-ean"><span t-esc="lin['ean_consum']"/></td>
                <td class="col-sc-right"><span t-esc="lin['qty']"/></td>
                <td class="col-sc"><span t-esc="lin['unit']"/></td>
                <td class="col-sc-right"><span t-esc="lin['qty_sc']"/></td>
                <!-- <td class="col-sc"><span t-esc="lin['unit_sc']"/></td> -->
                <td class="col-total text-right"><span t-esc="lin['total']"/></td>
              </tr>
            </tbody>
            <tfoot>
              <table class="table5">
                <tr t-foreach="ind_totals[o.id]" t-as="ind_t">
                  <td colspan="2"><strong><span t-esc="ind_t[0]"/></strong></td>
                  <td colspan="2"><strong><span t-esc="ind_t[1]"/></strong></td>
                  <td colspan="2"><strong><span t-esc="ind_t[2]"/></strong></td>
                  <td colspan="2"><strong><span t-esc="ind_t[3]"/></strong></td>
                </tr>
            </table>
            </tfoot>
          </table>
        </template>

        <template id="picking_header_part">
          <div class="header_part row">
            <div t-if="o.indirect">
              <div class="col-xs-4 header_part">
                <img t-if="o.supplier_id.image" t-att-src="'data:image/png;base64,%s' % o.supplier_id.image" style="max-height: 45mm;"/>
              </div>
              <div class="col-xs-8 header_part">
                <h4>Delivery Pick</h4>
                <br/>
                <table>
                  <tr class="tr-separated">
                    <td><label class="header-font">Delivery Number </label></td>
                    <td> : <span t-esc="o.sale_id.client_order_ref" class="reference-font"/></td>
                  </tr>
                  <tr class="tr-separated">
                    <td><label class="header-font">Date Of Delivery </label></td>
                    <td> : <span t-esc="o.min_date"/></td>
                  </tr>
                  <tr class="tr-separated">
                    <td><label class="header-font">Customer Control Nº</label></td>
                    <td> : ¿?<!--span t-esc="o.supplier_id.name"/--></td>
                  </tr>
                </table>
              </div>
            </div>
          </div>
        </template>

        <template id="picking_top_part">
            <div class="row top_part" t-if="not o.indirect">
              <div class="col-xs-7 top-border no-padd-left">
                  <div class="col-xs-3 no-padd-left">
                        <strong>PICKING:</strong>
                  </div>
                  <div class="col-xs-4">
                      <strong><span t-field="o.name"/></strong>
                  </div>
                  <div class="col-xs-5">
                    <strong>DATE: <span t-esc="totals[o.id]['pick_date']"/></strong>
                  </div>
                  <div t-if="o.partner_id">
                      <br/>
                      <p><strong>SOLICITANT</strong></p>
                      <p><span t-field="o.partner_id.ref"/> <span t-esc="o.partner_id.comercial or o.partner_id.name"/></p>
                      <p><span t-field="o.partner_id.street"/></p>
                      <p><span t-field="o.partner_id.zip"/> - <span t-field="o.partner_id.city"/></p>
                      <p>Tlfo. <span t-field="o.partner_id.phone"/></p>
                  </div>
                  <div>
                      <table class="table1">
                      <thead>
                          <tr>
                              <th><strong>Agent</strong></th>
                              <th><strong>Delivery Man</strong></th>
                          </tr>
                      </thead>
                      <tbody>
                          <tr>
                              <td>
                                  <span t-field="o.sale_id.user_id2.name"/>
                              </td>
                              <td>
                                <div t-if="o.route_detail_id">
                                  <span t-field="o.route_detail_id.comercial_id.name"/>
                                </div>
                              </td>
                          </tr>
                      </tbody>
                      </table>
                    </div>
                </div>
                <div class="col-xs-1">
                </div>
                <div class="col-xs-4">
                    <div t-if="o.partner_id.commercial_partner_id">
                        <br/>
                        <br/>
                        <!-- Page: <span class="page"/> de <span class="topage"/> -->
                        <div class="col-xs-7 no-padd-left">
                          <p><strong>INVOICE TO</strong></p>
                        </div>
                        <div class="col-xs-5 no-padd-left text-right">
                          <p>Pág. 1 de 1</p>
                        </div>
                        <p><span t-field="o.partner_id.commercial_partner_id.ref"/> <span t-field="o.partner_id.commercial_partner_id.name"/></p>
                        <p><span t-field="o.partner_id.commercial_partner_id.street"/></p>
                        <p><span t-field="o.partner_id.commercial_partner_id.zip"/> - <span t-field="o.partner_id.commercial_partner_id.city"/></p>
                        <br/>
                        <p><strong>NIF: </strong><span t-field="o.partner_id.commercial_partner_id.vat"/> </p>
                    </div>
                </div>
            </div>

            <div  class="row top_part"  t-if="o.indirect">
              <div class="col-xs-7 no-padd-left">
                <br/>
                <br/>
                <br/>
                <p><strong>Agente / Repartidor:</strong> <span t-if="o.route_detail_id" t-field="o.user_id.name"/> / <span t-if="o.route_detail_id" t-field="o.route_detail_id.comercial_id.name"/></p>
                <span t-esc="o.sale_id.client_order_ref" class="reference-font"/>
              </div>
              <div class="col-xs-1 no-padd-left">
              </div>
              <div class="col-xs-4 no-padd-left">
                <div t-if="o.partner_id.commercial_partner_id">
                    <br/>
                    <div class="col-xs-6 row">
                      <p>Customer Nº: </p>
                    </div>
                    <div class="col-xs-6 row text-right">
                      <p><span t-field="o.partner_id.commercial_partner_id.ref"/></p>
                    </div>
                    <br/>
                    <p><span t-field="o.partner_id.commercial_partner_id.name"/></p>
                    <p><span t-field="o.partner_id.commercial_partner_id.comercial"/></p>
                    <p><span t-field="o.partner_id.commercial_partner_id.street"/></p>
                    <p><span t-field="o.partner_id.commercial_partner_id.city"/></p>
                    <br/>
                </div>
              </div>
            </div>

        </template>

        <template id="picking_bottom_part">
          <div class="row my_footer_direct" t-if="not o.indirect and o.partner_id.pick_print_op">
              <table class="table3" t-if="o.partner_id.pick_print_op != 'not_valued' and o.picking_type_id.code == 'outgoing'">
              <thead>
                  <tr>
                      <th class="col-fbase text-right"><strong>IMPONIBLE BASE</strong></th>
                      <th class="col-fivaimp text-right"><strong>IMPORT IVA</strong></th>
                      <th class="col-ftd text-center"><strong>TOTAL DOCUMENT</strong></th>
                      <th class="col-fap text-right"><strong>ACCOUNT PAID</strong></th>
                      <th class="col-ftotal text-right"><strong>TOTAL TO PAY</strong></th>
                  </tr>
              </thead>
              <tbody>
                  <tr>
                    <td class="text-right">
                        <span t-esc="totals[o.id]['base']"/>
                    </td>
                    <td class="text-right">
                        <span t-esc="totals[o.id]['iva_import']"/>
                    </td>
                    <td class="text-center">
                       <div class="full-border">
                        <strong><span t-esc="totals[o.id]['total_doc']"/></strong>
                      </div>
                    </td>
                    <td class="text-right">
                        <span t-esc="totals[o.id]['acc_paid']"/>
                    </td>
                    <td class="text-right">
                        <span t-esc="totals[o.id]['total_paid']"/>
                    </td>
                  </tr>
              </tbody>
              </table>
          </div>
          <div class="row" t-if="o.indirect">
            <div class="my_footer_indirect">
              <div class="col-xs-4">
                OBSERVATIONS:
              </div>
              <div class="col-xs-8 right">
                SIGN, STAMP ACCORDING CUSTOMER AND DATE RECEIVING MERCHANDISE
              </div>
            </div>
            <div class="foot-text">
              <p class="Text1"><span t-esc="o.supplier_id.name"/>, <span t-esc="o.supplier_id.street"/> <span t-esc="o.supplier_id.street2"/> - Teléfono <span t-esc="o.supplier_id.phone"/> - Fax <span t-esc="o.supplier_id.fax"/> - <span t-esc="o.supplier_id.zip"/> <span t-esc="o.supplier_id.city"/></p>
              <p class="Text1"><span t-esc="o.supplier_id.vat"/></p>
              <!-- <p class="Text2">Registro Mercantil de Barcelona, Hoja B343092, Inscripción 129, Folio 140, Tomo 39375 A28660520</p> -->
            </div>
          </div>
        </template>
    </data>
</openerp>
