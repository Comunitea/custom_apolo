% for line in o:
${type_}${user.company_id.frigo_code.rjust(3, "0")}${datetime.strftime(datetime.now(), "%Y%m%d") if type_=='B' else '        '}${line.partner.ref and line.partner.ref[:7].rjust(7, '0')}${line.partner.parent_id and line.partner.parent_id.ref and line.partner.parent_id.ref[:7].rjust(7, '0') or '       ' if line.promo.rappel_id and line.promo.rappel_id.grouped else '       '}${line.partner.parent_id and line.partner.parent_id.concession_code and line.partner.parent_id.concession_code[:3].rjust(3, '0') or '   '}${line.partner.parent_id and line.partner.parent_id.ref and line.partner.parent_id.ref[:7].rjust(7, '0') or '       '}${'S' if line.promo.rappel_id and line.promo.rappel_id.grouped else 'N'}${'S' if line.promo.rappel_id and line.promo.rappel_id.rappel_group_id else 'N'}${line.subgroup.code}${line.promo.start_date[:4]}${('%.2f' % line.promo.discount_assumed).rjust(6, "0")}${('%.2f' % line.estimation).rjust(12, "0")}${line.promo.type == 'discount' and line.promo.get_discount() or '00.00'}${line.promo.type == 'rappel' and line.promo.rappel_id.get_section_string().ljust(632, ' ') or ''.ljust(632, ' ')}${'S' if line.promo.rappel_id and line.promo.rappel_id.rappel_group_id else 'N'}${'S' if line.promo.rappel_id and not line.promo.rappel_id.rappel_group_id and not line.promo.rappel_id.rappel_subgroup_id else 'N'}
% endfor
